{"version":3,"file":"vec3.js","names":["mat","vec4","v","create","v4a","v4b","x","y","z","set","copy","out","add","a","b","sub","scale","s","mmul","mul","mmul4","m","dot","lerp","t","sqrLen","len","Math","sqrt","dist","norm","cross"],"sources":["../assembly/vec3.ts"],"sourcesContent":["import { Float, ReadonlyMat3, ReadonlyMat4, ReadonlyVec3, Vec3, Vec4 } from './types';\nimport * as mat from './mat';\nimport * as vec4 from './vec4';\n\n// Temp variables\nconst v: Vec3 = create();\nconst v4a: Vec4 = vec4.create();\nconst v4b: Vec4 = vec4.create();\n\n/**\n * Create a new {@link Vec3}.\n * @param x defaults to 0\n * @param y defaults to 0\n * @param z defaults to 0\n * @returns [x, y, z]\n */\nexport function create(x: Float = 0, y: Float = 0, z: Float = 0): Vec3 {\n  return [x, y, z];\n}\n\n/**\n * Set values of a {@link Vec3}.\n * @param v the vec\n * @param x defaults to 0\n * @param y defaults to 0\n * @param z defaults to 0\n * @returns v\n */\nexport function set(v: Vec3, x: Float = 0, y: Float = 0, z: Float = 0): Vec3 {\n  unchecked(v[0] = x);\n  unchecked(v[1] = y);\n  unchecked(v[2] = z);\n  return v;\n}\n\n/**\n * Copy a {@link Vec3}.\n * @returns out\n */\nexport function copy(v: ReadonlyVec3, out: Vec3 = create()): Vec3 {\n  return mat.copy(v, out) as Vec3;\n}\n\n/**\n * Sum 2 {@link Vec3}.\n * @returns out = a + b\n */\nexport function add(a: ReadonlyVec3, b: ReadonlyVec3, out: Vec3 = create()): Vec3 {\n  return mat.add(a, b, out) as Vec3;\n}\n\n/**\n * Subtract 2 {@link Vec3}.\n * @returns out = a - b\n */\nexport function sub(a: ReadonlyVec3, b: ReadonlyVec3, out: Vec3 = create()): Vec3 {\n  return mat.sub(a, b, out) as Vec3;\n}\n\n/**\n * Multiply a {@link Vec3} by a constant.\n * @returns out = s * v\n */\nexport function scale(v: ReadonlyVec3, s: Float, out: Vec3 = create()): Vec3 {\n  return mat.scale(v, s, out) as Vec3;\n}\n\n/**\n * Multiply a {@link ReadonlyMat3} with a {@link Vec3}.\n * @returns out = m * v\n */\nexport function mmul(a: ReadonlyMat3, b: ReadonlyVec3, out: Vec3 = create()): Vec3 {\n  return mat.mul(3, a, b, out) as Vec3;\n}\n\n/**\n * Transform a {@link ReadonlyVec3} by a {@link ReadonlyMat4}.\n * @returns out = m * [x 1]\n */\nexport function mmul4(m: ReadonlyMat4, x: ReadonlyVec3, out: Vec3 = create()): Vec3 {\n  unchecked(vec4.set(v4a, x[0], x[1], x[2], 1));\n  return mat.copy(mat.mul(4, m, v4a, v4b), out, 0, 0, 3) as Vec3;\n}\n\n/**\n * Calculate the dot product of 2 {@link Vec3}.\n * @returns a * b\n */\nexport function dot(a: ReadonlyVec3, b: ReadonlyVec3): Float {\n  return mat.dot(a, b);\n}\n\n/**\n * Linear interpolate 2 {@link Vec3}.\n * @returns out = lerp(a, b, t)\n */\nexport function lerp(a: ReadonlyVec3, b: ReadonlyVec3, t: Float, out: Vec3 = create()): Vec3 {\n  return mat.lerp(a, b, t, out) as Vec3;\n}\n\n/**\n * Calculate squared length of a {@link Vec3}.\n * @returns dot(v, v)\n */\nexport function sqrLen(v: ReadonlyVec3): Float {\n  return dot(v, v);\n}\n\n/**\n * Calculate length of a {@link Vec3}.\n * @returns |v|\n */\nexport function len(v: ReadonlyVec3): Float {\n  return Math.sqrt(dot(v, v)) as Float;\n}\n\n/**\n * Calculate Euclidean distance of 2 {@link Vec3}.\n * @returns |a - b|\n */\nexport function dist(a: ReadonlyVec3, b: ReadonlyVec3): Float {\n  return len(sub(a, b, v));\n}\n\n/**\n * Normalize a {@link Vec3} and optionally stores result to the out param.\n * @returns v/|v|\n */\nexport function norm(v: ReadonlyVec3, out: Vec3 = create()): Vec3 {\n  return mat.scale(v, 1 / (len(v) || 1), out) as Vec3;\n}\n\n/**\n * Calculate cross product of 2 {@link Vec3}.\n * @returns out = a x b\n */\nexport function cross(a: ReadonlyVec3, b: ReadonlyVec3, out: Vec3 = create()): Vec3 {\n  const y: Float = unchecked(a[2] * b[0] - b[2] * a[0]);\n  const z: Float = unchecked(a[0] * b[1] - b[0] * a[1]);\n  unchecked(out[0] = a[1] * b[2] - b[1] * a[2]);\n  unchecked(out[1] = y);\n  unchecked(out[2] = z);\n  return out;\n}\n"],"mappings":"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"}