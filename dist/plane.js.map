{"version":3,"sources":["../assembly/plane.ts"],"names":["array","vec3","vec4","v1","create","v2","fromPointNormal","normal","point","out","norm","dot","copy","fromPoints","a","b","c","cross","sub","p","scale","Math","sqrt","dist","q","frontFacing","d"],"mappings":"MACO,GAAKA,CAAAA,K,wBACL,GAAKC,CAAAA,I,uBACL,GAAKC,CAAAA,I,iBAGZ,KAAMC,CAAAA,EAAQ,CAAGF,IAAI,CAACG,MAAL,EAAjB,CACA,KAAMC,CAAAA,EAAQ,CAAGJ,IAAI,CAACG,MAAL,EAAjB,CAMA,MAAO,SAASE,CAAAA,eAAT,CAAyBC,MAAzB,CAA+CC,KAA/C,CAAoEC,GAAU,CAAGP,IAAI,CAACE,MAAL,EAAjF,CAAuG,CAC5GH,IAAI,CAACS,IAAL,CAAUH,MAAV,CAAkBJ,EAAlB,EACUM,GAAG,CAAC,CAAD,CAAH,CAAS,CAACR,IAAI,CAACU,GAAL,CAASR,EAAT,CAAaK,KAAb,CAApB,CACA,MAAOR,CAAAA,KAAK,CAACY,IAAN,CAAWT,EAAX,CAAeM,GAAf,CACR,CAOD,MAAO,SAASI,CAAAA,UAAT,CAAoBC,CAApB,CAAqCC,CAArC,CAAsDC,CAAtD,CAAuEP,GAAU,CAAGP,IAAI,CAACE,MAAL,EAApF,CAA0G,CAC/G,MAAOE,CAAAA,eAAe,CAACL,IAAI,CAACgB,KAAL,CAAWhB,IAAI,CAACiB,GAAL,CAASH,CAAT,CAAYD,CAAZ,CAAeX,EAAf,CAAX,CAA+BF,IAAI,CAACiB,GAAL,CAASF,CAAT,CAAYF,CAAZ,CAAeT,EAAf,CAA/B,CAAmDA,EAAnD,CAAD,CAAyDS,CAAzD,CAA4DL,GAA5D,CACvB,CAMD,MAAO,SAASC,CAAAA,IAAT,CAAcS,CAAd,CAAgCV,GAAU,CAAGP,IAAI,CAACE,MAAL,EAA7C,CAAmE,CACxE,MAAiBF,CAAAA,IAAI,CAACkB,KAAL,CAAWD,CAAX,CAAc,GAAME,IAAI,CAACC,IAAL,CAAUH,CAAC,CAAC,CAAD,CAAD,CAAOA,CAAC,CAAC,CAAD,CAAR,CAAcA,CAAC,CAAC,CAAD,CAAD,CAAOA,CAAC,CAAC,CAAD,CAAtB,CAA4BA,CAAC,CAAC,CAAD,CAAD,CAAOA,CAAC,CAAC,CAAD,CAA9C,CAAD,EAAiE,CAAtE,CAAd,CAAwFV,GAAxF,CAClB,CAOD,MAAO,SAASc,CAAAA,IAAT,CAAcJ,CAAd,CAAgCK,CAAhC,CAAwD,CAC7D,MAAiBL,CAAAA,CAAC,CAAC,CAAD,CAAD,CAAOK,CAAC,CAAC,CAAD,CAAR,CAAcL,CAAC,CAAC,CAAD,CAAD,CAAOK,CAAC,CAAC,CAAD,CAAtB,CAA4BL,CAAC,CAAC,CAAD,CAAD,CAAOK,CAAC,CAAC,CAAD,CAApC,CAA0CL,CAAC,CAAC,CAAD,CAC7D,CAKD,MAAO,SAASM,CAAAA,WAAT,CAAqBN,CAArB,CAAuCO,CAAvC,CAAiE,CACtE,MAAiBP,CAAAA,CAAC,CAAC,CAAD,CAAD,CAAOO,CAAC,CAAC,CAAD,CAAR,CAAcP,CAAC,CAAC,CAAD,CAAD,CAAOO,CAAC,CAAC,CAAD,CAAtB,CAA4BP,CAAC,CAAC,CAAD,CAAD,CAAOO,CAAC,CAAC,CAAD,CAApC,EAA2C,CAC7D","sourcesContent":["import { Float, Plane, ReadonlyPlane, ReadonlyVec3, Vec3 } from './types';\r\nimport * as array from './array';\r\nimport * as vec3 from './vec3';\r\nimport * as vec4 from './vec4';\r\n\r\n// Temp variables\r\nconst v1: Vec3 = vec3.create();\r\nconst v2: Vec3 = vec3.create();\r\n\r\n/**\r\n * Build a normalized {@link Plane} from a normal and a point on plane.\r\n * Normalized plane has len(a, b, c) = 1.\r\n */\r\nexport function fromPointNormal(normal: ReadonlyVec3, point: ReadonlyVec3, out: Plane = vec4.create()): Plane {\r\n  vec3.norm(normal, v1);\r\n  unchecked(out[3] = -vec3.dot(v1, point));\r\n  return array.copy(v1, out) as Plane;\r\n}\r\n\r\n/**\r\n * Build a normalized {@link Plane} from 3 points on plane.\r\n * The counter-clockwise face of triangle formed by a, b, c is considered the front face of the plane.\r\n * Normalized plane has len(a, b, c) = 1.\r\n */\r\nexport function fromPoints(a: ReadonlyVec3, b: ReadonlyVec3, c: ReadonlyVec3, out: Plane = vec4.create()): Plane {\r\n  return fromPointNormal(vec3.cross(vec3.sub(b, a, v1), vec3.sub(c, a, v2), v2), a, out);\r\n}\r\n\r\n/**\r\n * Normalize a {@link Plane} equation for correct distance calculation.\r\n * Normalized plane has len(a, b, c) = 1.\r\n */\r\nexport function norm(p: ReadonlyPlane, out: Plane = vec4.create()): Plane {\r\n  return unchecked(vec4.scale(p, 1 / ((Math.sqrt(p[0] * p[0] + p[1] * p[1] + p[2] * p[2]) as Float) || 1), out));\r\n}\r\n\r\n/**\r\n * Calculates the shortest signed distance from the given point q to a normalized {@link Plane} p.\r\n * Positive if q is on the same side of the plane as the plane normal; negative if it is on the opposite side.\r\n * Normalized plane has len(a, b, c) = 1.\r\n */\r\nexport function dist(p: ReadonlyPlane, q: ReadonlyVec3): Float {\r\n  return unchecked(p[0] * q[0] + p[1] * q[1] + p[2] * q[2] + p[3]);\r\n}\r\n\r\n/**\r\n * Returns if the normal of a {@link Plane} p is front-facing given the direction vector d.\r\n */\r\nexport function frontFacing(p: ReadonlyPlane, d: ReadonlyVec3): boolean {\r\n  return unchecked(p[0] * d[0] + p[1] * d[1] + p[2] * d[2] <= 0);\r\n}\r\n"],"file":"plane.js"}