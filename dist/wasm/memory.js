import{create,free,memory}from"../../wasm/index.js";const registry=global.FinalizationRegistry&&new FinalizationRegistry(([ptr,size])=>free(ptr,size));function register(arr){if(arr.buffer===memory.buffer){registry?.register(arr,[arr.byteOffset,arr.length],arr)}}function unregister(arr){registry?.unregister(arr)}export class ManagedFloat64Array extends Float64Array{valid=true;constructor(length,ptr=create(length)){super(memory.buffer,ptr,length);register(this)}[Symbol.dispose](){this.free()}free(){if(this.valid){free(this.byteOffset,this.length);this.valid=false;unregister(this)}}}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjcmVhdGUiLCJmcmVlIiwibWVtb3J5IiwicmVnaXN0cnkiLCJnbG9iYWwiLCJGaW5hbGl6YXRpb25SZWdpc3RyeSIsInB0ciIsInNpemUiLCJyZWdpc3RlciIsImFyciIsImJ1ZmZlciIsImJ5dGVPZmZzZXQiLCJsZW5ndGgiLCJ1bnJlZ2lzdGVyIiwiTWFuYWdlZEZsb2F0NjRBcnJheSIsIkZsb2F0NjRBcnJheSIsInZhbGlkIiwiY29uc3RydWN0b3IiLCJTeW1ib2wiLCJkaXNwb3NlIl0sInNvdXJjZXMiOlsiLi4vLi4vanMvd2FzbS9tZW1vcnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlLCBmcmVlLCBtZW1vcnkgfSBmcm9tICcuLi8uLi93YXNtL2luZGV4LmpzJztcblxuY29uc3QgcmVnaXN0cnkgPSBnbG9iYWwuRmluYWxpemF0aW9uUmVnaXN0cnkgJiZcbiAgbmV3IEZpbmFsaXphdGlvblJlZ2lzdHJ5KChbcHRyLCBzaXplXTogW251bWJlciwgbnVtYmVyXSkgPT4gZnJlZShwdHIsIHNpemUpKTtcblxuZnVuY3Rpb24gcmVnaXN0ZXIoYXJyOiBGbG9hdDY0QXJyYXkpOiB2b2lkIHtcbiAgaWYgKGFyci5idWZmZXIgPT09IG1lbW9yeS5idWZmZXIpIHtcbiAgICByZWdpc3RyeT8ucmVnaXN0ZXIoYXJyLCBbYXJyLmJ5dGVPZmZzZXQsIGFyci5sZW5ndGhdLCBhcnIpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHVucmVnaXN0ZXIoYXJyOiBGbG9hdDY0QXJyYXkpOiB2b2lkIHtcbiAgcmVnaXN0cnk/LnVucmVnaXN0ZXIoYXJyKTtcbn1cblxuLyoqIEEgVHlwZWRBcnJheSB0aGF0IHJlcXVpcmVzIGV4cGxpY2l0IG1lbW9yeSBtYW5hZ2VtZW50LiAqL1xuZXhwb3J0IGludGVyZmFjZSBNYW5hZ2VkQXJyYXk8TiBleHRlbmRzIG51bWJlciA9IG51bWJlcj4gZXh0ZW5kcyBEaXNwb3NhYmxlIHtcbiAgLyoqIFdoZXRoZXIgdGhlIGFycmF5IGlzIHN0aWxsIHZhbGlkLiAqL1xuICByZWFkb25seSB2YWxpZDogYm9vbGVhbjtcblxuICAvKiogVW5kZXJseWluZyBidWZmZXIuICovXG4gIHJlYWRvbmx5IGJ1ZmZlcjogQXJyYXlCdWZmZXJMaWtlO1xuXG4gIC8qKiBPZmZzZXQgaW50byB0aGUgYnVmZmVyLiAqL1xuICByZWFkb25seSBieXRlT2Zmc2V0OiBudW1iZXI7XG5cbiAgLyoqIFRoZSBsZW5ndGggb2YgdGhlIGFycmF5LiAqL1xuICByZWFkb25seSBsZW5ndGg6IE47XG5cbiAgLyoqIEZyZWVzIHRoZSBhcnJheS4gKi9cbiAgZnJlZSgpOiB2b2lkO1xufVxuXG4vKiogQSBtYW5hZ2VkIEZsb2F0NjRBcnJheS4gKi9cbmV4cG9ydCBjbGFzcyBNYW5hZ2VkRmxvYXQ2NEFycmF5PE4gZXh0ZW5kcyBudW1iZXIgPSBudW1iZXI+XG4gIGV4dGVuZHMgRmxvYXQ2NEFycmF5IGltcGxlbWVudHMgTWFuYWdlZEFycmF5PE4+IHtcblxuICBwdWJsaWMgb3ZlcnJpZGUgcmVhZG9ubHkgbGVuZ3RoITogTjtcbiAgcHVibGljIHZhbGlkID0gdHJ1ZTtcblxuICBwdWJsaWMgY29uc3RydWN0b3IobGVuZ3RoOiBOLCBwdHIgPSBjcmVhdGUobGVuZ3RoKSkge1xuICAgIHN1cGVyKG1lbW9yeS5idWZmZXIsIHB0ciwgbGVuZ3RoKTtcbiAgICByZWdpc3Rlcih0aGlzKTtcbiAgfVxuXG4gIHB1YmxpYyBvdmVycmlkZSBbU3ltYm9sLmRpc3Bvc2VdKCk6IHZvaWQge1xuICAgIHRoaXMuZnJlZSgpO1xuICB9XG5cbiAgcHVibGljIGZyZWUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMudmFsaWQpIHtcbiAgICAgIGZyZWUodGhpcy5ieXRlT2Zmc2V0LCB0aGlzLmxlbmd0aCk7XG4gICAgICB0aGlzLnZhbGlkID0gZmFsc2U7XG4gICAgICB1bnJlZ2lzdGVyKHRoaXMpO1xuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiQUFBQSxPQUFTQSxNQUFNLENBQUVDLElBQUksQ0FBRUMsTUFBTSxLQUFRLHFCQUFxQixDQUUxRCxLQUFNLENBQUFDLFFBQVEsQ0FBR0MsTUFBTSxDQUFDQyxvQkFBb0IsRUFDMUMsR0FBSSxDQUFBQSxvQkFBb0IsQ0FBQyxDQUFDLENBQUNDLEdBQUcsQ0FBRUMsSUFBSSxDQUFtQixHQUFLTixJQUFJLENBQUNLLEdBQUcsQ0FBRUMsSUFBSSxDQUFDLENBQUMsQ0FFOUUsUUFBUyxDQUFBQyxRQUFRQSxDQUFDQyxHQUFpQixDQUFRLENBQ3pDLEdBQUlBLEdBQUcsQ0FBQ0MsTUFBTSxHQUFLUixNQUFNLENBQUNRLE1BQU0sQ0FBRSxDQUNoQ1AsUUFBUSxFQUFFSyxRQUFRLENBQUNDLEdBQUcsQ0FBRSxDQUFDQSxHQUFHLENBQUNFLFVBQVUsQ0FBRUYsR0FBRyxDQUFDRyxNQUFNLENBQUMsQ0FBRUgsR0FBRyxDQUMzRCxDQUNGLENBRUEsUUFBUyxDQUFBSSxVQUFVQSxDQUFDSixHQUFpQixDQUFRLENBQzNDTixRQUFRLEVBQUVVLFVBQVUsQ0FBQ0osR0FBRyxDQUMxQixDQXFCQSxNQUFPLE1BQU0sQ0FBQUssbUJBQW1CLFFBQ3RCLENBQUFDLFlBQXdDLENBR3pDQyxLQUFLLENBQUcsSUFBSSxDQUVaQyxXQUFXQSxDQUFDTCxNQUFTLENBQUVOLEdBQUcsQ0FBR04sTUFBTSxDQUFDWSxNQUFNLENBQUMsQ0FBRSxDQUNsRCxLQUFLLENBQUNWLE1BQU0sQ0FBQ1EsTUFBTSxDQUFFSixHQUFHLENBQUVNLE1BQU0sQ0FBQyxDQUNqQ0osUUFBUSxDQUFDLElBQUksQ0FDZixDQUVBLENBQWlCVSxNQUFNLENBQUNDLE9BQU8sR0FBVSxDQUN2QyxJQUFJLENBQUNsQixJQUFJLENBQUMsQ0FDWixDQUVPQSxJQUFJQSxDQUFBLENBQVMsQ0FDbEIsR0FBSSxJQUFJLENBQUNlLEtBQUssQ0FBRSxDQUNkZixJQUFJLENBQUMsSUFBSSxDQUFDVSxVQUFVLENBQUUsSUFBSSxDQUFDQyxNQUFNLENBQUMsQ0FDbEMsSUFBSSxDQUFDSSxLQUFLLENBQUcsS0FBSyxDQUNsQkgsVUFBVSxDQUFDLElBQUksQ0FDakIsQ0FDRixDQUNGIiwiaWdub3JlTGlzdCI6W119