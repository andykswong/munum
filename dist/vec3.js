import*as mat from"./mat.js";import*as vec4 from"./vec4.js";const v=create();const v4a=vec4.create();const v4b=vec4.create();export function create(x=0,y=0,z=0){return[x,y,z]}export function set(v,x=0,y=0,z=0){v[0]=x;v[1]=y;v[2]=z;return v}export function copy(v,out=create()){return mat.copy(v,out)}export function add(a,b,out=create()){return mat.add(a,b,out)}export function sub(a,b,out=create()){return mat.sub(a,b,out)}export function scale(v,s,out=create()){return mat.scale(v,s,out)}export function mmul(a,b,out=create()){return mat.mul(3,a,b,out)}export function mmul4(m,x,out=create()){vec4.set(v4a,x[0],x[1],x[2],1);return mat.copy(mat.mul(4,m,v4a,v4b),out,0,0,3)}export function dot(a,b){return mat.dot(a,b)}export function lerp(a,b,t,out=create()){return mat.lerp(a,b,t,out)}export function sqrLen(v){return dot(v,v)}export function len(v){return Math.sqrt(dot(v,v))}export function dist(a,b){return len(sub(a,b,v))}export function norm(v,out=create()){return mat.scale(v,1/(len(v)||1),out)}export function cross(a,b,out=create()){const y=a[2]*b[0]-b[2]*a[0];const z=a[0]*b[1]-b[0]*a[1];out[0]=a[1]*b[2]-b[1]*a[2];out[1]=y;out[2]=z;return out}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtYXQiLCJ2ZWM0IiwidiIsImNyZWF0ZSIsInY0YSIsInY0YiIsIngiLCJ5IiwieiIsInNldCIsImNvcHkiLCJvdXQiLCJhZGQiLCJhIiwiYiIsInN1YiIsInNjYWxlIiwicyIsIm1tdWwiLCJtdWwiLCJtbXVsNCIsIm0iLCJkb3QiLCJsZXJwIiwidCIsInNxckxlbiIsImxlbiIsIk1hdGgiLCJzcXJ0IiwiZGlzdCIsIm5vcm0iLCJjcm9zcyJdLCJzb3VyY2VzIjpbIi4uL2Fzc2VtYmx5L3ZlYzMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRmxvYXQsIFJlYWRvbmx5TWF0MywgUmVhZG9ubHlNYXQ0LCBSZWFkb25seVZlYzMsIFZlYzMsIFZlYzQgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCAqIGFzIG1hdCBmcm9tICcuL21hdCc7XG5pbXBvcnQgKiBhcyB2ZWM0IGZyb20gJy4vdmVjNCc7XG5cbi8vIFRlbXAgdmFyaWFibGVzXG5jb25zdCB2OiBWZWMzID0gY3JlYXRlKCk7XG5jb25zdCB2NGE6IFZlYzQgPSB2ZWM0LmNyZWF0ZSgpO1xuY29uc3QgdjRiOiBWZWM0ID0gdmVjNC5jcmVhdGUoKTtcblxuLyoqXG4gKiBDcmVhdGUgYSBuZXcge0BsaW5rIFZlYzN9LlxuICogQHBhcmFtIHggZGVmYXVsdHMgdG8gMFxuICogQHBhcmFtIHkgZGVmYXVsdHMgdG8gMFxuICogQHBhcmFtIHogZGVmYXVsdHMgdG8gMFxuICogQHJldHVybnMgW3gsIHksIHpdXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUoeDogRmxvYXQgPSAwLCB5OiBGbG9hdCA9IDAsIHo6IEZsb2F0ID0gMCk6IFZlYzMge1xuICByZXR1cm4gW3gsIHksIHpdO1xufVxuXG4vKipcbiAqIFNldCB2YWx1ZXMgb2YgYSB7QGxpbmsgVmVjM30uXG4gKiBAcGFyYW0gdiB0aGUgdmVjXG4gKiBAcGFyYW0geCBkZWZhdWx0cyB0byAwXG4gKiBAcGFyYW0geSBkZWZhdWx0cyB0byAwXG4gKiBAcGFyYW0geiBkZWZhdWx0cyB0byAwXG4gKiBAcmV0dXJucyB2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzZXQodjogVmVjMywgeDogRmxvYXQgPSAwLCB5OiBGbG9hdCA9IDAsIHo6IEZsb2F0ID0gMCk6IFZlYzMge1xuICB1bmNoZWNrZWQodlswXSA9IHgpO1xuICB1bmNoZWNrZWQodlsxXSA9IHkpO1xuICB1bmNoZWNrZWQodlsyXSA9IHopO1xuICByZXR1cm4gdjtcbn1cblxuLyoqXG4gKiBDb3B5IGEge0BsaW5rIFZlYzN9LlxuICogQHJldHVybnMgb3V0XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjb3B5KHY6IFJlYWRvbmx5VmVjMywgb3V0OiBWZWMzID0gY3JlYXRlKCkpOiBWZWMzIHtcbiAgcmV0dXJuIG1hdC5jb3B5KHYsIG91dCkgYXMgVmVjMztcbn1cblxuLyoqXG4gKiBTdW0gMiB7QGxpbmsgVmVjM30uXG4gKiBAcmV0dXJucyBvdXQgPSBhICsgYlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKGE6IFJlYWRvbmx5VmVjMywgYjogUmVhZG9ubHlWZWMzLCBvdXQ6IFZlYzMgPSBjcmVhdGUoKSk6IFZlYzMge1xuICByZXR1cm4gbWF0LmFkZChhLCBiLCBvdXQpIGFzIFZlYzM7XG59XG5cbi8qKlxuICogU3VidHJhY3QgMiB7QGxpbmsgVmVjM30uXG4gKiBAcmV0dXJucyBvdXQgPSBhIC0gYlxuICovXG5leHBvcnQgZnVuY3Rpb24gc3ViKGE6IFJlYWRvbmx5VmVjMywgYjogUmVhZG9ubHlWZWMzLCBvdXQ6IFZlYzMgPSBjcmVhdGUoKSk6IFZlYzMge1xuICByZXR1cm4gbWF0LnN1YihhLCBiLCBvdXQpIGFzIFZlYzM7XG59XG5cbi8qKlxuICogTXVsdGlwbHkgYSB7QGxpbmsgVmVjM30gYnkgYSBjb25zdGFudC5cbiAqIEByZXR1cm5zIG91dCA9IHMgKiB2XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZSh2OiBSZWFkb25seVZlYzMsIHM6IEZsb2F0LCBvdXQ6IFZlYzMgPSBjcmVhdGUoKSk6IFZlYzMge1xuICByZXR1cm4gbWF0LnNjYWxlKHYsIHMsIG91dCkgYXMgVmVjMztcbn1cblxuLyoqXG4gKiBNdWx0aXBseSBhIHtAbGluayBSZWFkb25seU1hdDN9IHdpdGggYSB7QGxpbmsgVmVjM30uXG4gKiBAcmV0dXJucyBvdXQgPSBtICogdlxuICovXG5leHBvcnQgZnVuY3Rpb24gbW11bChhOiBSZWFkb25seU1hdDMsIGI6IFJlYWRvbmx5VmVjMywgb3V0OiBWZWMzID0gY3JlYXRlKCkpOiBWZWMzIHtcbiAgcmV0dXJuIG1hdC5tdWwoMywgYSwgYiwgb3V0KSBhcyBWZWMzO1xufVxuXG4vKipcbiAqIFRyYW5zZm9ybSBhIHtAbGluayBSZWFkb25seVZlYzN9IGJ5IGEge0BsaW5rIFJlYWRvbmx5TWF0NH0uXG4gKiBAcmV0dXJucyBvdXQgPSBtICogW3ggMV1cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1tdWw0KG06IFJlYWRvbmx5TWF0NCwgeDogUmVhZG9ubHlWZWMzLCBvdXQ6IFZlYzMgPSBjcmVhdGUoKSk6IFZlYzMge1xuICB1bmNoZWNrZWQodmVjNC5zZXQodjRhLCB4WzBdLCB4WzFdLCB4WzJdLCAxKSk7XG4gIHJldHVybiBtYXQuY29weShtYXQubXVsKDQsIG0sIHY0YSwgdjRiKSwgb3V0LCAwLCAwLCAzKSBhcyBWZWMzO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSB0aGUgZG90IHByb2R1Y3Qgb2YgMiB7QGxpbmsgVmVjM30uXG4gKiBAcmV0dXJucyBhICogYlxuICovXG5leHBvcnQgZnVuY3Rpb24gZG90KGE6IFJlYWRvbmx5VmVjMywgYjogUmVhZG9ubHlWZWMzKTogRmxvYXQge1xuICByZXR1cm4gbWF0LmRvdChhLCBiKTtcbn1cblxuLyoqXG4gKiBMaW5lYXIgaW50ZXJwb2xhdGUgMiB7QGxpbmsgVmVjM30uXG4gKiBAcmV0dXJucyBvdXQgPSBsZXJwKGEsIGIsIHQpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsZXJwKGE6IFJlYWRvbmx5VmVjMywgYjogUmVhZG9ubHlWZWMzLCB0OiBGbG9hdCwgb3V0OiBWZWMzID0gY3JlYXRlKCkpOiBWZWMzIHtcbiAgcmV0dXJuIG1hdC5sZXJwKGEsIGIsIHQsIG91dCkgYXMgVmVjMztcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgc3F1YXJlZCBsZW5ndGggb2YgYSB7QGxpbmsgVmVjM30uXG4gKiBAcmV0dXJucyBkb3QodiwgdilcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNxckxlbih2OiBSZWFkb25seVZlYzMpOiBGbG9hdCB7XG4gIHJldHVybiBkb3Qodiwgdik7XG59XG5cbi8qKlxuICogQ2FsY3VsYXRlIGxlbmd0aCBvZiBhIHtAbGluayBWZWMzfS5cbiAqIEByZXR1cm5zIHx2fFxuICovXG5leHBvcnQgZnVuY3Rpb24gbGVuKHY6IFJlYWRvbmx5VmVjMyk6IEZsb2F0IHtcbiAgcmV0dXJuIE1hdGguc3FydChkb3QodiwgdikpIGFzIEZsb2F0O1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSBFdWNsaWRlYW4gZGlzdGFuY2Ugb2YgMiB7QGxpbmsgVmVjM30uXG4gKiBAcmV0dXJucyB8YSAtIGJ8XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkaXN0KGE6IFJlYWRvbmx5VmVjMywgYjogUmVhZG9ubHlWZWMzKTogRmxvYXQge1xuICByZXR1cm4gbGVuKHN1YihhLCBiLCB2KSk7XG59XG5cbi8qKlxuICogTm9ybWFsaXplIGEge0BsaW5rIFZlYzN9IGFuZCBvcHRpb25hbGx5IHN0b3JlcyByZXN1bHQgdG8gdGhlIG91dCBwYXJhbS5cbiAqIEByZXR1cm5zIHYvfHZ8XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtKHY6IFJlYWRvbmx5VmVjMywgb3V0OiBWZWMzID0gY3JlYXRlKCkpOiBWZWMzIHtcbiAgcmV0dXJuIG1hdC5zY2FsZSh2LCAxIC8gKGxlbih2KSB8fCAxKSwgb3V0KSBhcyBWZWMzO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSBjcm9zcyBwcm9kdWN0IG9mIDIge0BsaW5rIFZlYzN9LlxuICogQHJldHVybnMgb3V0ID0gYSB4IGJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyb3NzKGE6IFJlYWRvbmx5VmVjMywgYjogUmVhZG9ubHlWZWMzLCBvdXQ6IFZlYzMgPSBjcmVhdGUoKSk6IFZlYzMge1xuICBjb25zdCB5OiBGbG9hdCA9IHVuY2hlY2tlZChhWzJdICogYlswXSAtIGJbMl0gKiBhWzBdKTtcbiAgY29uc3QgejogRmxvYXQgPSB1bmNoZWNrZWQoYVswXSAqIGJbMV0gLSBiWzBdICogYVsxXSk7XG4gIHVuY2hlY2tlZChvdXRbMF0gPSBhWzFdICogYlsyXSAtIGJbMV0gKiBhWzJdKTtcbiAgdW5jaGVja2VkKG91dFsxXSA9IHkpO1xuICB1bmNoZWNrZWQob3V0WzJdID0geik7XG4gIHJldHVybiBvdXQ7XG59XG4iXSwibWFwcGluZ3MiOiJNQUNPLEdBQUssQ0FBQUEsR0FBRyxzQkFDUixHQUFLLENBQUFDLElBQUksaUJBR2hCLEtBQU0sQ0FBQUMsQ0FBTyxDQUFHQyxNQUFNLENBQUMsQ0FBQyxDQUN4QixLQUFNLENBQUFDLEdBQVMsQ0FBR0gsSUFBSSxDQUFDRSxNQUFNLENBQUMsQ0FBQyxDQUMvQixLQUFNLENBQUFFLEdBQVMsQ0FBR0osSUFBSSxDQUFDRSxNQUFNLENBQUMsQ0FBQyxDQVMvQixNQUFPLFNBQVMsQ0FBQUEsTUFBTUEsQ0FBQ0csQ0FBUSxDQUFHLENBQUMsQ0FBRUMsQ0FBUSxDQUFHLENBQUMsQ0FBRUMsQ0FBUSxDQUFHLENBQUMsQ0FBUSxDQUNyRSxNQUFPLENBQUNGLENBQUMsQ0FBRUMsQ0FBQyxDQUFFQyxDQUFDLENBQ2pCLENBVUEsTUFBTyxTQUFTLENBQUFDLEdBQUdBLENBQUNQLENBQU8sQ0FBRUksQ0FBUSxDQUFHLENBQUMsQ0FBRUMsQ0FBUSxDQUFHLENBQUMsQ0FBRUMsQ0FBUSxDQUFHLENBQUMsQ0FBUSxDQUNqRU4sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFHSSxDQUFDLENBQ1JKLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBR0ssQ0FBQyxDQUNSTCxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUdN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