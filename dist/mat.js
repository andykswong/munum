import{EPSILON,fequal as fequalNum,lerp as lerpNum}from"./scalar.js";const m=new Array(16);export function copy(src,dst,srcOffset=0,dstOffset=0,count=src.length-srcOffset){for(let i=0;i<count;++i){dst[dstOffset+i]=src[srcOffset+i]}return dst}export function fequal(a,b,epsilon=EPSILON){if(a.length-b.length){return false}for(let i=0;i<a.length;++i){if(!fequalNum(a[i],b[i],epsilon)){return false}}return true}export function add(a,b,out){for(let i=0;i<a.length;++i){out[i]=a[i]+b[i]}return out}export function sub(a,b,out){for(let i=0;i<a.length;++i){out[i]=a[i]-b[i]}return out}export function scale(a,s,out){for(let i=0;i<a.length;++i){out[i]=a[i]*s}return out}export function mul(n,a,b,out){const rr=a.length/n;const rc=b.length/n;let f=0;m.length=rr*rc;for(let i=0;i<rc;++i){for(let j=0;j<rr;++j){f=0;for(let k=0;k<n;++k){f+=a[k*rr+j]*b[i*n+k]}m[i*rr+j]=f}}copy(m,out,0,0,m.length);return out}export function lerp(a,b,t,out){for(let i=0;i<a.length;++i){out[i]=lerpNum(a[i],b[i],t)}return out}export function dot(a,b){let f=0;for(let i=0;i<a.length;++i){f+=a[i]*b[i]}return f}export function transpose(n,m,out){let f=0;for(let i=0;i<n;++i){for(let j=i;j<n;++j){f=m[j*n+i];out[j*n+i]=m[i*n+j];out[i*n+j]=f}}return out}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFUFNJTE9OIiwiZmVxdWFsIiwiZmVxdWFsTnVtIiwibGVycCIsImxlcnBOdW0iLCJtIiwiQXJyYXkiLCJjb3B5Iiwic3JjIiwiZHN0Iiwic3JjT2Zmc2V0IiwiZHN0T2Zmc2V0IiwiY291bnQiLCJsZW5ndGgiLCJpIiwiYSIsImIiLCJlcHNpbG9uIiwiYWRkIiwib3V0Iiwic3ViIiwic2NhbGUiLCJzIiwibXVsIiwibiIsInJyIiwicmMiLCJmIiwiaiIsImsiLCJ0IiwiZG90IiwidHJhbnNwb3NlIl0sInNvdXJjZXMiOlsiLi4vYXNzZW1ibHkvbWF0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEZsb2F0LCBJbnQsIFJlYWRvbmx5VmVjLCBWZWMgfSBmcm9tICcuL3R5cGVzJztcbmltcG9ydCB7IEVQU0lMT04sIGZlcXVhbCBhcyBmZXF1YWxOdW0sIGxlcnAgYXMgbGVycE51bSB9IGZyb20gJy4vc2NhbGFyJztcblxuLy8gVGVtcCB2YXJpYWJsZXNcbmNvbnN0IG0gPSBuZXcgQXJyYXk8RmxvYXQ+KDE2KTtcblxuLyoqXG4gKiBHZW5lcmljIGZ1bmN0aW9uIHRvIGNvcHkgZWxlbWVudHMgZnJvbSBhbnkgYXJyYXktbGlrZSBvYmplY3QgdG8gYW5vdGhlci5cbiAqIEByZXR1cm5zIGRzdFxuICovXG5leHBvcnQgZnVuY3Rpb24gY29weTxULCBVPihcbiAgc3JjOiBULCBkc3Q6IFUsIHNyY09mZnNldDogSW50ID0gMCwgZHN0T2Zmc2V0OiBJbnQgPSAwLFxuICAvLyBAdHMtaWdub3JlOiBTa2lwIHR5cGUgY2hlY2tpbmdcbiAgY291bnQ6IEludCA9IHNyYy5sZW5ndGggLSBzcmNPZmZzZXRcbik6IFUge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyArK2kpIHtcbiAgICAvLyBAdHMtaWdub3JlOiBTa2lwIHR5cGUgY2hlY2tpbmdcbiAgICB1bmNoZWNrZWQoZHN0W2RzdE9mZnNldCArIGldID0gc3JjW3NyY09mZnNldCArIGldKTtcbiAgfVxuICByZXR1cm4gZHN0O1xufVxuXG4vKipcbiAqIENoZWNrcyBpZiAyIG51bWJlciBhcnJheXMgaGF2ZSBlcXVhbCBsZW5ndGggYW5kIGVxdWFsIHZhbHVlcyB3aXRoaW4gYW4gZXBzaWxvbi5cbiAqIEByZXR1cm5zIGEgPT0gYlxuICovXG5leHBvcnQgZnVuY3Rpb24gZmVxdWFsKGE6IFJlYWRvbmx5VmVjLCBiOiBSZWFkb25seVZlYywgZXBzaWxvbjogRmxvYXQgPSBFUFNJTE9OKTogYm9vbGVhbiB7XG4gIGlmIChhLmxlbmd0aCAtIGIubGVuZ3RoKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7ICsraSkge1xuICAgIGlmICghdW5jaGVja2VkKGZlcXVhbE51bShhW2ldLCBiW2ldLCBlcHNpbG9uKSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogU3VtcyAyIHZlY3RvcnMuXG4gKiBAcmV0dXJucyBvdXQgPSBhICsgYlxuICovXG5leHBvcnQgZnVuY3Rpb24gYWRkKGE6IFJlYWRvbmx5VmVjLCBiOiBSZWFkb25seVZlYywgb3V0OiBWZWMpOiBWZWMge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcbiAgICB1bmNoZWNrZWQob3V0W2ldID0gYVtpXSArIGJbaV0pO1xuICB9XG4gIHJldHVybiBvdXQ7XG59XG5cbi8qKlxuICogU3VidHJhY3RzIDIgdmVjdG9ycy5cbiAqIEByZXR1cm5zIG91dCA9IGEgLSBiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzdWIoYTogUmVhZG9ubHlWZWMsIGI6IFJlYWRvbmx5VmVjLCBvdXQ6IFZlYyk6IFZlYyB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgYS5sZW5ndGg7ICsraSkge1xuICAgIHVuY2hlY2tlZChvdXRbaV0gPSBhW2ldIC0gYltpXSk7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuLyoqXG4gKiBTY2FsZXMgYSB2ZWN0b3IgYnkgYSBjb25zdGFudC5cbiAqIEByZXR1cm5zIG91dCA9IHMgKiBhXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzY2FsZShhOiBSZWFkb25seVZlYywgczogRmxvYXQsIG91dDogVmVjKTogVmVjIHtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBhLmxlbmd0aDsgKytpKSB7XG4gICAgdW5jaGVja2VkKG91dFtpXSA9IGFbaV0gKiBzKTtcbiAgfVxuICByZXR1cm4gb3V0O1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgbWF0cml4IG11bHRpcGxpY2F0aW9uIG9mIGEgKiBiLCB3aGVyZSBzaXplIG9mIGEgaXMgKHJyICogbiksIGFuZCBiIGlzIChuICogcmMpLlxuICogQHBhcmFtIG4gbWF0cml4IG9yZGVyXG4gKiBAcGFyYW0gYSBtYXRyaXggb2Ygc2l6ZSByciAqIG5cbiAqIEBwYXJhbSBiIG1hdHJpeCBvZiBzaXplIG4gKiByY1xuICogQHBhcmFtIG91dCB0aGUgb3V0cHV0IG1hdHJpeCBvZiBzaXplIHJyICogcmNcbiAqIEByZXR1cm5zIG91dCA9IGEgKiBiXG4gKi9cbiBleHBvcnQgZnVuY3Rpb24gbXVsKG46IEludCwgYTogUmVhZG9ubHlWZWMsIGI6IFJlYWRvbmx5VmVjLCBvdXQ6IFZlYyk6IFZlYyB7XG4gIGNvbnN0IHJyID0gKGEubGVuZ3RoIC8gbikgYXMgSW50O1xuICBjb25zdCByYyA9IChiLmxlbmd0aCAvIG4pIGFzIEludDtcbiAgbGV0IGY6IEZsb2F0ID0gMDtcbiAgbS5sZW5ndGggPSByciAqIHJjO1xuXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgcmM7ICsraSkge1xuICAgIGZvciAobGV0IGogPSAwOyBqIDwgcnI7ICsraikge1xuICAgICAgZiA9IDA7XG4gICAgICBmb3IgKGxldCBrID0gMDsgayA8IG47ICsraykge1xuICAgICAgICBmICs9IHVuY2hlY2tlZChhW2sgKiByciArIGpdICogYltpICogbiArIGtdKTtcbiAgICAgIH1cbiAgICAgIHVuY2hlY2tlZChtW2kgKiByciArIGpdID0gZik7XG4gICAgfVxuICB9XG4gIGNvcHkobSwgb3V0LCAwLCAwLCBtLmxlbmd0aCk7XG5cbiAgcmV0dXJuIG91dDtcbn1cblxuLyoqXG4gKiBMZXJwIDIgdmVjdG9ycy5cbiAqIEByZXR1cm5zIG91dCA9IGxlcnAoYSwgYiwgdClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxlcnAoYTogUmVhZG9ubHlWZWMsIGI6IFJlYWRvbmx5VmVjLCB0OiBGbG9hdCwgb3V0OiBWZWMpOiBWZWMge1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcbiAgICB1bmNoZWNrZWQob3V0W2ldID0gbGVycE51bShhW2ldLCBiW2ldLCB0KSk7XG4gIH1cbiAgcmV0dXJuIG91dDtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiBhIDIgdmVjdG9ycy5cbiAqIEByZXR1cm5zIGEgKiBiXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkb3QoYTogUmVhZG9ubHlWZWMsIGI6IFJlYWRvbmx5VmVjKTogRmxvYXQge1xuICBsZXQgZjogRmxvYXQgPSAwO1xuICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyArK2kpIHtcbiAgICBmICs9IHVuY2hlY2tlZChhW2ldICogYltpXSk7XG4gIH1cbiAgcmV0dXJuIGY7XG59XG5cbi8qKlxuICogVHJhbnNwb3NlcyBhIG1hdHJpeC5cbiAqIEBwYXJhbSBuIG1hdHJpeCBvcmRlclxuICogQHBhcmFtIG0gdGhlIG1hdHJpeFxuICogQHBhcmFtIG91dCB0aGUgb3V0cHV0IG1hdHJpeFxuICogQHJldHVybnMgb3V0ID0gW01dVFxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJhbnNwb3NlKG46IEludCwgbTogUmVhZG9ubHlWZWMsIG91dDogVmVjKTogVmVjIHtcbiAgbGV0IGY6IEZsb2F0ID0gMDtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuOyArK2kpIHtcbiAgICBmb3IgKGxldCBqID0gaTsgaiA8IG47ICsraikge1xuICAgICAgLy8gU3dhcCBtaWogYW5kIG1qaVxuICAgICAgZiA9IHVuY2hlY2tlZChtW2ogKiBuICsgaV0pO1xuICAgICAgdW5jaGVja2VkKG91dFtqICogbiArIGldID0gbVtpICogbiArIGpdKTtcbiAgICAgIHVuY2hlY2tlZChvdXRbaSAqIG4gKyBqXSA9IGYpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gb3V0O1xufVxuIl0sIm1hcHBpbmdzIjoiT0FDU0EsT0FBTyxDQUFFQyxNQUFNLEdBQUksQ0FBQUMsU0FBUyxDQUFFQyxJQUFJLEdBQUksQ0FBQUMsT0FBTyxtQkFHdEQsS0FBTSxDQUFBQyxDQUFDLENBQUcsR0FBSSxDQUFBQyxLQUFLLENBQVEsRUFBRSxDQUFDLENBTTlCLE1BQU8sU0FBUyxDQUFBQyxJQUFJQSxDQUNsQkMsR0FBTSxDQUFFQyxHQUFNLENBQUVDLFNBQWMsQ0FBRyxDQUFDLENBQUVDLFNBQWMsQ0FBRyxDQUFDLENBRXREQyxLQUFVLENBQUdKLEdBQUcsQ0FBQ0ssTUFBTSxDQUFHSCxTQUFTLENBQ2hDLENBQ0gsSUFBSyxHQUFJLENBQUFJLENBQUMsQ0FBRyxDQUFDLENBQUVBLENBQUMsQ0FBR0YsS0FBSyxDQUFFLEVBQUVFLENBQUMsQ0FBRSxDQUVwQkwsR0FBRyxDQUFDRSxTQUFTLENBQUdHLENBQUMsQ0FBQyxDQUFHTixHQUFHLENBQUNFLFNBQVMsQ0FBR0ksQ0FBQyxDQUNsRCxDQUNBLE1BQU8sQ0FBQUwsR0FDVCxDQU1BLE1BQU8sU0FBUyxDQUFBUixNQUFNQSxDQUFDYyxDQUFjLENBQUVDLENBQWMsQ0FBRUMsT0FBYyxDQUFHakIsT0FBTyxDQUFXLENBQ3hGLEdBQUllLENBQUMsQ0FBQ0YsTUFBTSxDQUFHRyxDQUFDLENBQUNILE1BQU0sQ0FBRSxDQUN2QixNQUFPLE1BQ1QsQ0FDQSxJQUFLLEdBQUksQ0FBQUMsQ0FBQyxDQUFHLENBQUMsQ0FBRUEsQ0FBQyxDQUFHQyxDQUFDLENBQUNGLE1BQU0sQ0FBRSxFQUFFQyxDQUFDLENBQUUsQ0FDakMsR0FBSSxDQUFX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