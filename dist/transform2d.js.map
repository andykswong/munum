{"version":3,"file":"transform2d.js","names":["mat3","translate2d","x","y","out","create","id","scale2d","rotate2d","theta","Math","cos","sin","transform2d","translation","rotation","scaling","i","j"],"sources":["../assembly/transform2d.ts"],"sourcesContent":["import { Float, Mat3, ReadonlyVec2 } from './types';\nimport * as mat3 from './mat3';\n\n/**\n * Return a {@link Mat3} for a 2D point translated by (x, y).\n */\nexport function translate2d(x: Float, y: Float, out: Mat3 = mat3.create()): Mat3 {\n  mat3.id(out);\n  unchecked(out[6] = x);\n  unchecked(out[7] = y);\n  return out;\n}\n\n/**\n * Returns a {@link Mat3} for a 2D point scaled by (x, y).\n */\nexport function scale2d(x: Float, y: Float, out: Mat3 = mat3.create()): Mat3 {\n  mat3.id(out);\n  unchecked(out[0] = x);\n  unchecked(out[4] = y);\n  return out;\n}\n\n/**\n * Returns a {@link Mat3} for a 2D point rotated in couterclockwise direction.\n */\nexport function rotate2d(theta: Float, out: Mat3 = mat3.create()): Mat3 {\n  mat3.id(out);\n  unchecked(out[0] = out[4] = Math.cos(theta) as Float);\n  unchecked(out[1] = out[3] = Math.sin(theta) as Float);\n  unchecked(out[3] *= -1);\n  return out;\n}\n\n/**\n * Returns a {@link Mat3} for transformation in TRS order (= translation * rotation * scale).\n * @returns out = translation * rotation * scale\n */\n export function transform2d(translation: ReadonlyVec2, rotation: Float, scaling: ReadonlyVec2, out: Mat3 = mat3.create()): Mat3 {\n  // Apply rotation\n  rotate2d(rotation, out);\n\n  // Apply scaling\n  for (let i = 0; i < 2; ++i) {\n    for (let j = 0; j < 2; ++j) {\n      unchecked(out[3 * i + j] *= scaling[i]);\n    }\n  }\n\n  // Apply translation\n  unchecked(out[6] = translation[0]);\n  unchecked(out[7] = translation[1]);\n\n  return out;\n}"],"mappings":"MACO,GAAKA,K,iBAKZ,MAAO,SAASC,YAAT,CAAqBC,CAArB,CAA+BC,CAA/B,CAAyCC,GAAS,CAAGJ,IAAI,CAACK,MAAL,EAArD,CAA0E,CAC/EL,IAAI,CAACM,EAAL,CAAQF,GAAR,EACUA,GAAG,CAAC,CAAD,CAAH,CAASF,CAAnB,CACUE,GAAG,CAAC,CAAD,CAAH,CAASD,CAAnB,CACA,MAAOC,IACR,CAKD,MAAO,SAASG,QAAT,CAAiBL,CAAjB,CAA2BC,CAA3B,CAAqCC,GAAS,CAAGJ,IAAI,CAACK,MAAL,EAAjD,CAAsE,CAC3EL,IAAI,CAACM,EAAL,CAAQF,GAAR,EACUA,GAAG,CAAC,CAAD,CAAH,CAASF,CAAnB,CACUE,GAAG,CAAC,CAAD,CAAH,CAASD,CAAnB,CACA,MAAOC,IACR,CAKD,MAAO,SAASI,SAAT,CAAkBC,KAAlB,CAAgCL,GAAS,CAAGJ,IAAI,CAACK,MAAL,EAA5C,CAAiE,CACtEL,IAAI,CAACM,EAAL,CAAQF,GAAR,EACUA,GAAG,CAAC,CAAD,CAAH,CAASA,GAAG,CAAC,CAAD,CAAH,CAASM,IAAI,CAACC,GAAL,CAASF,KAAT,CAA5B,CACUL,GAAG,CAAC,CAAD,CAAH,CAASA,GAAG,CAAC,CAAD,CAAH,CAASM,IAAI,CAACE,GAAL,CAASH,KAAT,CAA5B,CACUL,GAAG,CAAC,CAAD,CAAH,EAAU,CAAC,CAArB,CACA,MAAOA,IACR,CAMA,MAAO,SAASS,YAAT,CAAqBC,WAArB,CAAgDC,QAAhD,CAAiEC,OAAjE,CAAwFZ,GAAS,CAAGJ,IAAI,CAACK,MAAL,EAApG,CAAyH,CAE/HG,QAAQ,CAACO,QAAD,CAAWX,GAAX,CAAR,CAGA,IAAK,GAAIa,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,CAApB,CAAuB,EAAEA,CAAzB,CAA4B,CAC1B,IAAK,GAAIC,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAG,CAApB,CAAuB,EAAEA,CAAzB,CAA4B,CAChBd,GAAG,CAAC,EAAIa,CAAJ,CAAQC,CAAT,CAAH,EAAkBF,OAAO,CAACC,CAAD,CACpC,CACF,CAGSb,GAAG,CAAC,CAAD,CAAH,CAASU,WAAW,CAAC,CAAD,CAA9B,CACUV,GAAG,CAAC,CAAD,CAAH,CAASU,WAAW,CAAC,CAAD,CAA9B,CAEA,MAAOV,IACR"}